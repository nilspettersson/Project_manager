<script src="~/Scripts/js/sprint.js"></script>

<div class="container pt-4">

    <!--menu start-->
    @Html.ActionLink("overview", "users", "ProjectManager", new { user = @ViewBag.userName, project = @ViewBag.projectName, type = "" }, new { @class = "btn btn btn-secondary mr-3" })
    @Html.ActionLink("current sprint", "users", "ProjectManager", new { user = @ViewBag.userName, project = @ViewBag.projectName, type = "sprint" }, new { @class = "btn btn btn-secondary mr-3" })
    @Html.ActionLink("backlog", "users", "ProjectManager", new { user = @ViewBag.userName, project = @ViewBag.projectName, type = "backlog" }, new { @class = "btn btn btn-secondary mr-3" })
    @Html.ActionLink("stats", "users", "ProjectManager", new { user = @ViewBag.userName, project = @ViewBag.projectName, type = "stats" }, new { @class = "btn btn btn-secondary mr-3" })
    <!--menu end-->

    @if (ViewBag.type == "overview")
    {
        <div class="mt-4">
            <h2>@ViewBag.projectName</h2>
        </div>
    }
    else if (ViewBag.type == "sprint")
    {

        if (ViewBag.sprintExists == false)
        {
            @Html.Partial("_CreateSprint");

            <div class="card text-center">
                <div class="card-body">
                    <h5 class="display-4">You have no active sprint</h5>
                    <p class="card-text">Create a sprint to start to using this page!.</p>
                    <button id="new_sprint" class="btn btn-outline-success " data-toggle="modal" data-target="#sprint_modal">new sprint</button>
                </div>
            </div>

        }
        else
        {

            DateTime end_time = ((DateTime)ViewBag.sprint["end_time"]);
            DateTime CurrentTime = DateTime.Now;

            int totalHours = (int)end_time.Subtract(CurrentTime).TotalHours;
            int days = totalHours / 24;
            int hours = totalHours % 24;

            <h3>@ViewBag.sprint["name"]</h3>
            <h5>Time left: @days days @hours hours </h5>


            <div class="row">
                <div class="col-sm text-center ">
                    <label>New</label>
                </div>
                <div class="col-sm text-center">
                    <label>In progress</label>
                </div>
                <div class="col-sm text-center">
                    <label>Testing</label>
                </div>
                <div class="col-sm text-center">
                    <label>Done</label>
                </div>
            </div>

            <div class="row">
                <div class="col-sm" ondrop="drop(event, this)" ondragover="allowDrop(event)">
                    <div class="card" id="task1" draggable="true" ondragstart="drag(event)">
                        <div class="card-body">
                            <h5 class="card-title">Add database1</h5>
                            <p class="card-text">create a simple database for testing new project.</p>
                            <a href="#" class="btn btn-outline-primary float-right">Edit</a>
                        </div>
                    </div>
                    <div class="card" id="task2" draggable="true" ondragstart="drag(event)">
                        <div class="card-body">
                            <h5 class="card-title">Add database2</h5>
                            <p class="card-text">create a simple database for testing new project.</p>
                            <a href="#" class="btn btn-outline-primary float-right">Edit</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm"  ondrop="drop(event, this)" ondragover="allowDrop(event)">
                    <div class="card" id="task3" draggable="true" ondragstart="drag(event)">
                        <div class="card-body">
                            <h5 class="card-title">Add database3</h5>
                            <p class="card-text">create a simple database for testing new project.</p>
                            <a href="#" class="btn btn-outline-primary float-right">Edit</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm" ondrop="drop(event, this)" ondragover="allowDrop(event)">
                    <div class="card" id="task4" draggable="true" ondragstart="drag(event)">
                        <div class="card-body">
                            <h5 class="card-title">Add database4</h5>
                            <p class="card-text">create a simple database for testing new project.</p>
                            <a href="#" class="btn btn-outline-primary float-right">Edit</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm" ondrop="drop(event, this)" ondragover="allowDrop(event)">
                    <div class="card" id="task5" draggable="true" ondragstart="drag(event)">
                        <div class="card-body">
                            <h5 class="card-title">Add database5</h5>
                            <p class="card-text">create a simple database for testing new project.</p>
                            <a href="#" class="btn btn-outline-primary float-right">Edit</a>
                        </div>
                    </div>
                </div>
            </div>


        }
    }



</div>
